(function(e){var c=function(){this.base=window.ajaxurl;this.doAbort=!0;this.data=null;this.dataType="json";this.type="POST";this.cache=!1;this.beforeSend=this.onError=this.callback=null};var b=c.prototype;b.setCache=function(a){this.cache=a};b.setDataType=function(a){this.dataType=a};b.setData=function(a){this.data=a};b.setType=function(a){-1===e.inArray(a.toUpperCase(),["GET","POST"])&&console.warn("Invalid method type: "+a);this.type=a};b.setCallback=function(a){this.callback=a};b.setOnError=function(a){this.onError=
a};b.setBefore=function(a){this.beforeSend=a};window.StecDB=function(){this.disableAbort=this.enableCache=!1;this.ajax=null};b=window.StecDB.prototype;b.cache=[];b.clearCache=function(){this.cache=[]};b.readFromCache=function(a){var b=JSON.stringify(a.data);null!==this.ajax&&!0===a.doAbort&&this.ajax.abort();"function"===typeof a.beforeSend&&a.beforeSend();"function"===typeof a.callback&&a.callback(this.cache[b]);this.ajax=null};b.setCache=function(a,b){!0===this.enableCache&&(a=JSON.stringify(a.data),
this.cache[a]=b)};b.hasCache=function(a){if(!0!==this.enableCache)return!1;a=JSON.stringify(a.data);return this.cache[a]?!0:!1};b.query=function(a){var b=this,d;a instanceof c||console.warn("request is not instance of Request!");window.stecApiNonce&&window.stecApiNonce.nonce||console.warn("stecApiNonce is missing");(d=a.data instanceof FormData?!0:!1)?a.data.append("security",window.stecApiNonce.nonce):a.data.security=window.stecApiNonce.nonce;if(this.hasCache(a))return this.readFromCache(a);b.ajax=
e.ajax({dataType:a.dataType,type:"POST",cache:a.cache,url:a.base,data:a.data,beforeSend:function(){null!==b.ajax&&!0===a.doAbort&&b.ajax.abort();"function"===typeof a.beforeSend&&a.beforeSend()},success:function(f){!0===this.enableCache&&b.setCache(a,f);"function"===typeof a.callback&&a.callback(f)},error:function(b,c,d){if("function"===typeof a.onError)a.onError(b,c,d);else console.log(b,c,d)},complete:function(){b.ajax=null},processData:d?!1:!0,contentType:d?!1:"application/x-www-form-urlencoded; charset=UTF-8"})};
b.newRequest=function(){return new c}})(window.jQuery);